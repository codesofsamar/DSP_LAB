function [Ib, Qb, state_out, d] = ddc(x, state_in);

% [Ib, Qb, state_out, d] = ddc(x, state_in);
%
% Operates on a single block of data to generate I and Q outputs.
%
% Inputs:
%	x	Data
% Outputs:
%	Ib, Qb	Down-converted outputs
%	d	Debug information

state = state_in;

% BPF to isolate tone

% Send tone to PLL to get reference

% Compensate for delay of BPF to get aligned carrier.

% Generate sine and cosine waveforms.  Take multiple of frequency.

% Do down-conversion (multiply by carrier)

% Matched filtering

% Now you should output Ib and Qb which are the baseband I and Q samples

% Return debug information if desired
if (nargout >= 4),
  d.accum = accum1;
  d.cos1 = cos1;
  d.sin1 = sin1;
  d.ref = ref;
  d.t1 = t1;
end

state_out = state;
